#{Re-map default prefix: 'C-b' to 'C-a'}
unbind C-b
set -g prefix C-a
bind C-a send-prefix

### Main Options
###########################################################################

#{Scroll History}
set -g history-limit 50000

#{Lower escape timing from 500ms to 50ms for quicker response to scroll-buffer access.}
set -s escape-time 50

#{Set first window to index 1 (not 0) to map more to the keyboard layout}
set -g renumber-windows on
set -g base-index 1
setw -h pane-base-index 1

#{Mouse scrolling on tmux session}
set -g mouse on

#{Enabling xterm-keys}
set -g xterm-keys on

#{To use a 256 color terminal - setup correct term in tmux}
set -g default-terminal "screen-256color"

#{Fix pbcopy/pbpaste}
if 'command -v reattach-to-user-namespace >/dev/null' \
    'set -gq @osx-pasteboard true'

if 'tmux show -gv @osx-clipboard' \
    'set -g default-command "reattach-to-user-namespace -l $SHELL"'

# present a menu of URLs to open from the visible pane. sweet.
bind-key u capture-pane \;\
    save-buffer /tmp/tmux-buffer \;\
    split-window -l 10 "urlview /tmp/tmux-buffer"

### Clipboard
###########################################################################

# TODO: I dont' see any side-effects using this command, so, right now it'll be commented
#set-option -g set-clipboard off

#{ctrl-c to send to clipboard}
#bind C-c run "tmux save-buffer - | xclip -i -sel clipboard"

#{ctrl-v to paste from clipboard}
#bind C-v run "tmux set-buffer \"$(xclip -o -sel clipboard)\"; tmux paste-buffer"

#{Selection with mouse should copy to clipboard right away, in addition to the default action.}
unbind -n -Tcopy-mode-vi MouseDragEnd1Pane
bind -Tcopy-mode-vi MouseDragEnd1Pane send -X copy-selection-and-cancel\; run "tmux save-buffer - | pbcopy > /dev/null"

#{Drag to re-order windows}
bind-key -n MouseDrag1Status swap-window -t=

### Key-bindings
###########################################################################

#{Quick `source-file` reloading inside tmux session}
bind r source-file ~/.tmux.conf

#{Re-mapped *horizontal* window split & default key unbind}
bind-key -n C-h split-window -h
unbind '"'

#{Re-mapped *vertical* window split & default key unbind}
bind-key -n C-v split-window -v
unbind %

#{Command to toggle mouse scrolling option on tmux session}
bind-key m set-option -g mouse on \; display 'Mouse: ON'
bind-key M set-option -g mouse off \; display 'Mouse: OFF'

### Theme
###########################################################################

#{Update status bar every second, instead of default timeout (15 sec)}
set -g status-interval 1

### { Window Status Formatting }
set -g window-status-format '#I:#(pwd="#{pane_current_path}"; echo ${pwd####*/})#F'
set -g window-status-current-format '#I:#(pwd="#{pane_current_path}"; echo ${pwd####*/})#F'

### Interface
###########################################################################

# Statusbar Color Palatte
set-option -g status-style default
set-option -g status-style bg=black
set-option -g status-style fg=brightgreen
set-option -g status-left-length 40
set-option -g status-right-length 80
set-option -g status-justify left

# pane border
set-option -g pane-border-style bg=black
set-option -g pane-border-style fg=white
set-option -g pane-active-border-style fg=brightgreen

# Message Color Palette
set-option -g message-style bg=green
set-option -g message-style fg=brightred

# Window Status Color Palette
setw -g window-status-style fg=brightblue
setw -g window-status-style bg=default
setw -g window-status-style dim

# active window title colors
setw -g window-status-current-style fg=brightred
setw -g window-status-current-style bg=default
setw -g window-status-current-style bright

setw -g window-status-activity-style default
setw -g window-status-activity-style fg=brightgreen

setw -g window-status-bell-style fg=red,default
setw -g window-status-separator " | "
